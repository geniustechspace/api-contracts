syntax = "proto3";

package geniustechspace.common.operations.v1;

// =============================================================================
// ENTERPRISE OPERATION TYPES - v1.0.0
// =============================================================================
//
// This file defines standardized operation type enumerations for enterprise-grade
// API contracts with focus on auditability, security, and compliance across the
// entire organizations platform.
//
// DESIGN PRINCIPLES:
// - Use 10-point numeric spacing for extensibility and intermediate values
// - Never renumber existing entries (breaking change)
// - Always include UNSPECIFIED as enum value 0
// - Document compliance requirements (SOC2, ISO 27001, etc.)
// - Align with industry standards for operation classification
//
// VERSION HISTORY:
// - 1.0.0 (2025-11-01): Initial enterprise-standard release
//
// COMPLIANCE SCOPE:
// - SOC 2 Type II: Required for audit logging and access control
// - ISO 27001: Information security event logging (A.12.4)
// - GDPR: Data subject rights tracking (Articles 15-22)
// - HIPAA: PHI access audit requirements (ยง164.308(a)(1)(ii)(D))
//
// =============================================================================

// Options for language-specific code generation and package mappings.
option go_package = "github.com/geniustechspace/api-contracts/gen/go/common/operations/v1";
option java_multiple_files = true;
option java_package = "com.geniustechspace.api.common.operations.v1";
option csharp_namespace = "GeniusTechSpace.Api.Common.Operations.V1";
option php_namespace = "GeniusTechSpace\\Api\\Common\\Operations\\V1";
option ruby_package = "GeniusTechSpace::Api::Common::Operations::V1";

// =============================================================================
// OPERATION TYPE ENUMERATION
// =============================================================================

// Operation represents the type of action being performed on a resource within
// the organizations platform. Used for authorization, audit logging, metrics,
// and compliance tracking across all services.
//
// USAGE GUIDANCE:
// - Use in audit logs to track what type of operation was performed
// - Use in authorization policies to grant/deny specific operation types
// - Use in metrics and monitoring to track operation patterns
// - Include in request/response metadata to indicate operation context
// - Map to appropriate HTTP methods (POST, GET, PUT/PATCH, DELETE)
//
// COMPLIANCE REQUIREMENTS:
// - SOC 2: All operations must be logged with timestamp, actor, and resource
// - ISO 27001: Required for access control audit trail (A.9.4.1)
// - GDPR: Essential for data subject access request tracking (Article 15)
// - HIPAA: Mandatory for PHI access auditing (ยง164.312(b))
//
// SECURITY CONSIDERATIONS:
// - Validate authorization before executing any operation
// - Log all operations for security monitoring and forensics
// - Implement rate limiting per operation type
// - Track failed operations for anomaly detection
//
// HTTP METHOD MAPPING:
// - OPERATION_CREATE: POST
// - OPERATION_READ: GET (single resource)
// - OPERATION_UPDATE: PUT, PATCH
// - OPERATION_DELETE: DELETE
// - OPERATION_LIST: GET (collection)
// - OPERATION_ARCHIVE: POST, PUT (soft delete)
// - OPERATION_RESTORE: POST, PUT (undelete)
// - OPERATION_EXPORT: GET, POST (bulk extract)
// - OPERATION_IMPORT: POST (bulk ingest)
// - OPERATION_SEARCH: GET (with query parameters)
//
// RELATED TYPES:
// - AuditAction (common.enums): For detailed audit event types
// - Status (common.enums): For operation outcome tracking
// - ErrorCode (common.enums): For error classification
// - OperationRequest: For operation execution requests
// - OperationResponse: For operation execution results
//
// EXAMPLE:
//   message AuditLog {
//     Operation operation = 1;               // Type of operation performed
//     string resource_type = 2;              // e.g., "user", "order", "payment"
//     string resource_id = 3;                // Unique identifier of resource
//     string actor_id = 4;                   // Who performed the operation
//     google.protobuf.Timestamp timestamp = 5; // When operation occurred
//     Status status = 6;                     // Operation outcome
//     string ip_address = 7;                 // Source IP for security
//   }
enum Operation {
  // Default/uninitialized value. Should never be explicitly set in production.
  // REQUIRED: proto3 best practice for enum zero value.
  // COMPLIANCE: Must be treated as error condition in audit logs.
  OPERATION_UNSPECIFIED = 0;

  // Create a new resource or entity.
  // HTTP: POST
  // DATABASE: INSERT
  // AUTHORIZATION: Requires create permission on resource type
  // AUDIT: Log resource type, ID, and all field values (sanitize PII)
  // GDPR: May require consent tracking for personal data
  OPERATION_CREATE = 10;

  // Read/retrieve a single resource by identifier.
  // HTTP: GET /resource/{id}
  // DATABASE: SELECT WHERE id = ?
  // AUTHORIZATION: Requires read permission on specific resource
  // AUDIT: Log resource access (critical for PII/PHI)
  // COMPLIANCE: Track for data subject access requests (GDPR Article 15)
  OPERATION_READ = 20;

  // Update/modify an existing resource.
  // HTTP: PUT (full update), PATCH (partial update)
  // DATABASE: UPDATE
  // AUTHORIZATION: Requires update permission on specific resource
  // AUDIT: Log changed fields (before/after values, sanitize PII)
  // COMPLIANCE: Essential for data rectification tracking (GDPR Article 16)
  OPERATION_UPDATE = 30;

  // Permanently delete a resource (hard delete).
  // HTTP: DELETE
  // DATABASE: DELETE
  // AUTHORIZATION: Requires delete permission on specific resource
  // AUDIT: Log complete resource state before deletion
  // COMPLIANCE: Track for right to erasure (GDPR Article 17)
  // SECURITY: Consider soft delete (OPERATION_ARCHIVE) for audit trail
  OPERATION_DELETE = 40;

  // List/query multiple resources (collection endpoint).
  // HTTP: GET /resources?filter=...
  // DATABASE: SELECT with optional WHERE, ORDER BY, LIMIT
  // AUTHORIZATION: Requires list permission on resource type
  // AUDIT: Log query parameters and result count (not full result set)
  // PERFORMANCE: Implement pagination to prevent resource exhaustion
  OPERATION_LIST = 50;

  // Soft delete / archive a resource (preserves data for compliance).
  // HTTP: POST /resource/{id}/archive, PUT
  // DATABASE: UPDATE set archived = true, archived_at = NOW()
  // AUTHORIZATION: Requires archive or delete permission
  // AUDIT: Log archival with retention policy reference
  // COMPLIANCE: Preferred over DELETE for regulatory retention (SOC 2, GDPR)
  OPERATION_ARCHIVE = 60;

  // Restore a previously archived/soft-deleted resource.
  // HTTP: POST /resource/{id}/restore, PUT
  // DATABASE: UPDATE set archived = false, archived_at = NULL
  // AUTHORIZATION: Requires restore or create permission
  // AUDIT: Log restoration with justification/approval reference
  // COMPLIANCE: Track for data retention policy adherence
  OPERATION_RESTORE = 70;

  // Export resource data (bulk data extraction).
  // HTTP: GET /resources/export, POST /resources/export
  // DATABASE: SELECT (potentially large result set)
  // AUTHORIZATION: Requires export permission (higher privilege)
  // AUDIT: Critical audit event - log format, scope, and recipient
  // COMPLIANCE: GDPR data portability (Article 20), requires tracking
  // SECURITY: Rate limit and monitor for data exfiltration attempts
  OPERATION_EXPORT = 80;

  // Import resource data (bulk data ingestion).
  // HTTP: POST /resources/import
  // DATABASE: Multiple INSERT/UPDATE operations
  // AUTHORIZATION: Requires import permission (higher privilege)
  // AUDIT: Log source, format, record count, and validation results
  // COMPLIANCE: Track for data lineage and quality assurance
  // SECURITY: Validate and sanitize all input data
  OPERATION_IMPORT = 90;

  // Search resources using advanced query capabilities.
  // HTTP: GET /resources/search?q=...
  // DATABASE: Full-text search, complex WHERE conditions
  // AUTHORIZATION: Requires search permission on resource type
  // AUDIT: Log search terms and result count (not full results)
  // PERFORMANCE: Implement query complexity limits and timeouts
  OPERATION_SEARCH = 110;

  // Protect legacy numeric slots from accidental reuse.
  // Reserved range 1-9 for backward compatibility.
  reserved 1 to 9;

  // Reserve commonly used operation names to prevent future collisions.
  // These names may be used in other systems or documentation.
  reserved "OPERATION_GET", "OPERATION_POST", "OPERATION_PUT",
           "OPERATION_PATCH", "OPERATION_INSERT", "OPERATION_SELECT",
           "OPERATION_MODIFY", "OPERATION_REMOVE", "OPERATION_FIND";
}
